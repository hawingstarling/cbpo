{
    "type": "cbpo-widget",
    "key": "51808c4f-1cdd-418b-8f1c-549ce2fc723b",
    "config": {
        "menu": {
            "config": {
                "selection": {
                    "options": [
                        {
                            "label": "Widget Settings",
                            "icon": "fa fa-cog",
                            "value": "widget-settings",
                            "type": "item"
                        },
                        {
                            "label": "Element Settings",
                            "icon": "fa fa-cog",
                            "value": "element-settings",
                            "type": "item"
                        },
                        {
                            "label": "Remove",
                            "icon": "fa fa-times",
                            "value": "remove",
                            "type": "item"
                        },
                        {
                            "type": "divider"
                        },
                        {
                            "label": "Export CSV",
                            "icon": "fa fa-download",
                            "value": "csv",
                            "type": "item"
                        }
                    ],
                    "dsUrl": ""
                },
                "label": {
                    "text": ""
                },
                "icons": {
                    "css": "fa fa-ellipsis-h"
                },
                "dataSource": null
            },
            "enabled": true
        },
        "grid": {
            "x": 0,
            "y": 60,
            "w": 12,
            "h": 50,
            "i": 1,
            "id": "id-cb66099f-ea62-4371-bb8a-87485d6b63be",
            "moved": false
        },
        "autoHeight": false,
        "widget": {
            "title": {
                "text": "Brands",
                "enabled": true,
                "edited": true
            },
            "style": {
                "background_color": null,
                "foreground_color": null,
                "header_background_color": null,
                "header_foreground_color": null,
                "border_width": null,
                "border_radius": null
            },
            "id": "id-e854f65b-5459-43bd-8281-4ec787488328",
            "class": ""
        },
        "action": {
            "elements": []
        },
        "elements": [
            {
                "type": "cbpo-element-table",
                "config": {
                    "dataSource": "",
                    "header": {
                        "resizeMinWidth": null,
                        "multiline": false,
                        "draggable": false
                    },
                    "drillDown": {
                        "enabled": false
                    },
                    "columns": [
                        {
                          "displayName": "Brand Name",
                          "name": "brand_name",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": null,
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "string"
                        },
                        {
                          "displayName": "Profit",
                          "name": "profit",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": {
                              "common": {
                                "plain": {
                                  "nil": "NULL",
                                  "empty": "EMPTY",
                                  "na": "N/A"
                                },
                                "html": {
                                  "nil": "<span class=\"d-sdk-nil\">null</span>",
                                  "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                  "na": "<span class=\"d-sdk-na\">N/A</span>"
                                },
                                "prefix": null,
                                "suffix": null
                              },
                              "type": "currency",
                              "config": {
                                "currency": {
                                  "symbol": "$",
                                  "symbolPrefix": true,
                                  "inCents": false
                                },
                                "numeric": {
                                  "comma": true,
                                  "precision": 2,
                                  "siPrefix": false
                                }
                              }
                            },
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "number"
                        },
                        {
                          "displayName": "Revenue",
                          "name": "revenue",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": {
                              "common": {
                                "plain": {
                                  "nil": "NULL",
                                  "empty": "EMPTY",
                                  "na": "N/A"
                                },
                                "html": {
                                  "nil": "<span class=\"d-sdk-nil\">null</span>",
                                  "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                  "na": "<span class=\"d-sdk-na\">N/A</span>"
                                },
                                "prefix": null,
                                "suffix": null
                              },
                              "type": "currency",
                              "config": {
                                "currency": {
                                  "symbol": "$",
                                  "symbolPrefix": true,
                                  "inCents": false
                                },
                                "numeric": {
                                  "comma": true,
                                  "precision": 2,
                                  "siPrefix": false
                                }
                              }
                            },
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "number"
                        },
                        {
                          "displayName": "Ad Spend",
                          "name": "ad_spend",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": {
                              "common": {
                                "plain": {
                                  "nil": "NULL",
                                  "empty": "EMPTY",
                                  "na": "N/A"
                                },
                                "html": {
                                  "nil": "<span class=\"d-sdk-nil\">null</span>",
                                  "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                  "na": "<span class=\"d-sdk-na\">N/A</span>"
                                },
                                "prefix": null,
                                "suffix": null
                              },
                              "type": "currency",
                              "config": {
                                "currency": {
                                  "symbol": "$",
                                  "symbolPrefix": true,
                                  "inCents": false
                                },
                                "numeric": {
                                  "comma": true,
                                  "precision": 2,
                                  "siPrefix": false
                                }
                              }
                            },
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "number"
                        },
                        {
                          "expr": "CASE WHEN SUM(@'ad_revenue') = 0 THEN 0 ELSE (SUM(@'ad_spend') / SUM(@'ad_revenue')) * 100  END",
                          "name": "ACoS",
                          "displayName": "ACoS",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": {
                              "common": {
                                "plain": {
                                  "nil": "NULL",
                                  "empty": "EMPTY",
                                  "na": "N/A"
                                },
                                "html": {
                                  "nil": "<span class=\"d-sdk-nil\">null</span>",
                                  "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                  "na": "<span class=\"d-sdk-na\">N/A</span>"
                                },
                                "prefix": null,
                                "suffix": "%"
                              },
                              "type": "progress",
                              "config": {
                                "visualization": "percentage",
                                "base": 100
                              }
                            },
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "number"
                        },
                        {
                            "expr": "CASE WHEN SUM(@'revenue') = 0 THEN 0 ELSE (SUM(@'ad_spend') / SUM(@'revenue')) * 100  END",
                            "name": "TACoS",
                            "displayName": "TACoS",
                            "visible": true,
                            "cell": {
                              "style": {},
                              "format": {
                                "common": {
                                  "plain": {
                                    "nil": "NULL",
                                    "empty": "EMPTY",
                                    "na": "N/A"
                                  },
                                  "html": {
                                    "nil": "<span class=\"d-sdk-nil\">null</span>",
                                    "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                    "na": "<span class=\"d-sdk-na\">N/A</span>"
                                  },
                                  "prefix": null,
                                  "suffix": "%"
                                },
                                "type": "progress",
                                "config": {
                                  "visualization": "percentage",
                                  "base": 100
                                }
                              },
                              "aggrFormats": null,
                              "binFormats": null
                            },
                            "header": {
                              "style": {},
                              "format": null
                            },
                            "sort": {
                              "enabled": true,
                              "direction": null
                            },
                            "type": "number"
                        },
                        {
                          "expr": "CASE WHEN SUM(@'ad_spend') = 0 THEN 0 ELSE SUM(@'profit') / SUM(@'ad_spend') * 100 END",
                          "name": "ROI",
                          "displayName": "ROI",
                          "visible": true,
                          "cell": {
                            "style": {},
                            "format": {
                              "common": {
                                "plain": {
                                  "nil": "NULL",
                                  "empty": "EMPTY",
                                  "na": "N/A"
                                },
                                "html": {
                                  "nil": "<span class=\"d-sdk-nil\">null</span>",
                                  "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                  "na": "<span class=\"d-sdk-na\">N/A</span>"
                                },
                                "prefix": null,
                                "suffix": "%"
                              },
                              "type": "progress",
                              "config": {
                                "visualization": "percentage",
                                "base": 100
                              }
                            },
                            "aggrFormats": null,
                            "binFormats": null
                          },
                          "header": {
                            "style": {},
                            "format": null
                          },
                          "sort": {
                            "enabled": true,
                            "direction": null
                          },
                          "type": "number"
                        },
                        {
                            "displayName": "Ad Revenue",
                            "name": "ad_revenue",
                            "visible": true,
                            "cell": {
                              "style": {},
                              "format": {
                                "common": {
                                  "plain": {
                                    "nil": "NULL",
                                    "empty": "EMPTY",
                                    "na": "N/A"
                                  },
                                  "html": {
                                    "nil": "<span class=\"d-sdk-nil\">null</span>",
                                    "empty": "<span class=\"d-sdk-empty\">empty</span>",
                                    "na": "<span class=\"d-sdk-na\">N/A</span>"
                                  },
                                  "prefix": null,
                                  "suffix": null
                                },
                                "type": "currency",
                                "config": {
                                  "currency": {
                                    "symbol": "$",
                                    "symbolPrefix": true,
                                    "inCents": false
                                  },
                                  "numeric": {
                                    "comma": true,
                                    "precision": 2,
                                    "siPrefix": false
                                  }
                                }
                              },
                              "aggrFormats": null,
                              "binFormats": null
                            },
                            "header": {
                              "style": {},
                              "format": null
                            },
                            "sort": {
                              "enabled": true,
                              "direction": null
                            },
                            "type": "number"
                        }
                    ],
                    "sorting": [],
                    "widget": {
                        "title": {
                            "text": "Table of [BrandName, Profit, Ad Spend, Percentage]",
                            "enabled": false,
                            "edited": false
                        },
                        "style": {
                            "background_color": null,
                            "foreground_color": null,
                            "header_background_color": null,
                            "header_foreground_color": null,
                            "border_width": null,
                            "border_radius": null
                        }
                    },
                    "sizeSettings": {
                        "defaultMinSize": 250,
                        "warningText": "The area is too small for this visualization."
                    },
                    "globalControlOptions": {
                        "aggregation": {
                            "enabled": false
                        },
                        "globalGrouping": {
                            "enabled": false,
                            "config": {
                                "value": false
                            },
                            "position": "top"
                        },
                        "grouping": {
                            "enabled": false
                        },
                        "editColumn": {
                            "enabled": false
                        },
                        "editColumnLabel": {
                            "enabled": false
                        },
                        "editColumnFormat": {
                            "enabled": false
                        },
                        "editBin": {
                            "enabled": false
                        },
                        "id": "id-d3a9f59b-3f93-43ff-a88c-e3f7b786add4"
                    },
                    "grouping": {
                        "columns": [
                            {
                                "name": "brand_name"
                            }
                        ],
                        "aggregations": [
                            {
                              "column": "date",
                              "aggregation": "max",
                              "alias": "date"
                            },
                            {
                              "column": "profit",
                              "aggregation": "sum",
                              "alias": "profit"
                            },
                            {
                              "column": "revenue",
                              "aggregation": "sum",
                              "alias": "revenue"
                            },
                            {
                              "column": "ad_spend",
                              "aggregation": "sum",
                              "alias": "ad_spend"
                            },
                            {
                              "column": "ad_revenue",
                              "aggregation": "sum",
                              "alias": "ad_revenue"
                            }
                        ]
                    },
                    "bins": [],
                    "pagination": {
                        "limit": 50,
                        "current": 1,
                        "total": 32,
                        "type": "auto",
                        "buttons": {
                            "first": {
                                "visibility": true,
                                "label": "First"
                            },
                            "last": {
                                "visibility": true,
                                "label": "Last"
                            },
                            "prev": {
                                "visibility": true,
                                "label": "Previous"
                            },
                            "next": {
                                "visibility": true,
                                "label": "Next"
                            }
                        },
                        "numbers": {
                            "beforeCurrent": 2,
                            "afterCurrent": 2
                        },
                        "default": "auto",
                        "id": "id-1dc48d03-fd69-435f-8866-638302c1c7b3",
                        "widget": {
                            "title": {
                                "enabled": true,
                                "text": ""
                            },
                            "class": ""
                        }
                    },
                    "messages": {
                        "no_data_at_all": "No data",
                        "no_data_found": "No data found"
                    },
                    "timezone": {
                        "enabled": true,
                        "utc": "America/Dawson",
                        "visible": true
                    },
                    "compactMode": {
                        "enabled": false,
                        "mode": "normal"
                    },
                    "rowActions": {
                        "enabled": false,
                        "inline": 1,
                        "display": "always",
                        "position": "left",
                        "colWidth": 150,
                        "controls": []
                    },
                    "bulkActions": {
                        "enabled": false,
                        "enableInlineAction": true,
                        "mode": "checkbox",
                        "filterMode": false,
                        "total": 1585,
                        "labels": {
                            "actionColumn": "Actions",
                            "selectAll": "Select all $total items",
                            "allSelected": "All $total items selected"
                        },
                        "controls": []
                    },
                    "detailView": {
                        "enabled": false,
                        "mode": "inline",
                        "action": {
                            "breakpoint": 768,
                            "props": {
                                "size": "sm",
                                "variant": "primary"
                            },
                            "icons": {
                                "closed": "fa-arrow-circle-o-down",
                                "opened": "fa-arrow-circle-o-right"
                            },
                            "label": "View"
                        },
                        "breakpoints": {
                            "320": 1,
                            "768": 2,
                            "1024": 3
                        }
                    },
                    "globalSummary": {
                        "enabled": false,
                        "summaries": []
                    },
                    "tableSummary": {
                        "enabled": false,
                        "position": "footer",
                        "labelActionColumn": "Summary",
                        "summaries": []
                    },
                    "id": "3ffb021c-0743-4c37-bdba-2c33cdca10ca"
                }
            }
        ],
        "filter": {
            "form": {
                "config": {
                    "controls": []
                }
            },
            "base": {
                "config": {
                  "query": {
                    "id": null,
                    "level": 0,
                    "type": "AND",
                    "conditions": [{
                      "column": "ad_spend",
                      "level": 1,
                      "operator": "$ne",
                      "value": 0
                    }]
                  }
                }
            },
            "builder": {
                "enabled": false,
                "readable": {
                    "enabled": false
                },
                "config": {
                    "trigger": {
                        "label": "Setting Filter"
                    },
                    "modal": {
                        "title": "Query Builder"
                    },
                    "threshold": {
                        "maxLevel": 5
                    },
                    "ignore": {
                        "global": {
                            "visible": false,
                            "value": false
                        },
                        "base": {
                            "visible": false,
                            "value": false
                        }
                    },
                    "query": {
                        "id": null,
                        "level": 0,
                        "type": "AND",
                        "conditions": []
                    },
                    "form": {
                        "columns": []
                    }
                }
            },
            "globalFilter": {
                "enabled": false
            },
            "alignment": ""
        },
        "columnManager": {
            "enabled": false,
            "config": {
                "trigger": {
                    "label": "Manage Columns"
                },
                "modal": {
                    "title": "Manage Columns"
                },
                "hiddenColumns": [],
                "managedColumns": []
            }
        },
        "calculatedColumn": {
            "enabled": false
        },
        "waitingForGlobalFilter": false,
        "id": "4febb601-9e0b-42e3-93f6-f1308ccc2355"
    },
    "visualizationId": "b50d0166-f5f0-4a47-9561-3cac00d91433"
}